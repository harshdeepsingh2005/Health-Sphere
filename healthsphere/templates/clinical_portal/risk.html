{% extends "base_simple.html" %}
{% load static %}

{% block title %}Risk Assessment - HealthSphere AI{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/bento-grid.css' %}">
<style>
.gradient-risk { background: linear-gradient(135deg, #E89B87, #f0b097); }
.gradient-high { background: linear-gradient(135deg, #f56565, #fc8181); }
.gradient-medium { background: linear-gradient(135deg, #F0C3A0, #f8d3b0); }
.gradient-low { background: linear-gradient(135deg, #A8C5A8, #b8d4b8); }

.risk-badge-high { background: rgba(245, 101, 101, 0.15); color: #f56565; padding: 6px 14px; border-radius: 8px; font-size: 12px; font-weight: 600; }
.risk-badge-medium { background: rgba(240, 173, 78, 0.15); color: #f0ad4e; padding: 6px 14px; border-radius: 8px; font-size: 12px; font-weight: 600; }
.risk-badge-low { background: rgba(72, 187, 120, 0.15); color: #48bb78; padding: 6px 14px; border-radius: 8px; font-size: 12px; font-weight: 600; }

.patient-risk-card {
    padding: 16px;
    background: white;
    border-radius: 12px;
    margin-bottom: 12px;
    transition: all 0.3s ease;
    cursor: pointer;
}

.patient-risk-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.risk-factor {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px;
    background: rgba(168, 197, 232, 0.03);
    border-radius: 8px;
    margin-bottom: 8px;
}
</style>
{% endblock %}

{% block content %}
<div class="bento-grid">
    <!-- Page Header -->
    <div class="bento-card bento-wide" data-hover-lift>
        <div class="card-glow"></div>
        <div class="card-header">
            <div class="card-title">
                <div class="metric-icon gradient-risk">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                Risk Assessment
            </div>
            <button class="bento-btn bento-btn-primary">
                <i class="fas fa-plus"></i>
                New Assessment
            </button>
        </div>
        <p style="color: #718096; margin: 0;">AI-powered patient risk analysis and monitoring</p>
    </div>

    <!-- Assessment Stats -->
    <div class="bento-card bento-wide" data-tilt>
        <div class="card-glow"></div>
        <div class="card-title">
            <i class="fas fa-chart-pie"></i>
            Risk Distribution
        </div>
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 12px;">
            <div style="text-align: center; padding: 12px; background: rgba(245, 101, 101, 0.05); border-radius: 12px;">
                <div style="font-size: 28px; font-weight: 700; color: #f56565;">18</div>
                <div style="font-size: 12px; color: #718096; margin-top: 4px;">High Risk</div>
            </div>
            <div style="text-align: center; padding: 12px; background: rgba(240, 173, 78, 0.05); border-radius: 12px;">
                <div style="font-size: 28px; font-weight: 700; color: #f0ad4e;">45</div>
                <div style="font-size: 12px; color: #718096; margin-top: 4px;">Medium Risk</div>
            </div>
            <div style="text-align: center; padding: 12px; background: rgba(72, 187, 120, 0.05); border-radius: 12px;">
                <div style="font-size: 28px; font-weight: 700; color: #48bb78;">127</div>
                <div style="font-size: 12px; color: #718096; margin-top: 4px;">Low Risk</div>
            </div>
        </div>
    </div>

    <!-- High Risk Patients -->
    <div class="bento-card bento-small interactive" data-hover-lift>
        <div class="card-glow"></div>
        <div class="metric-icon gradient-high">
            <i class="fas fa-exclamation-circle"></i>
        </div>
        <div class="metric-value">18</div>
        <div class="metric-label">High Risk Patients</div>
        <div class="metric-trend down">
            <i class="fas fa-arrow-down"></i>
            <span>-2 Today</span>
        </div>
    </div>

    <!-- Medium Risk -->
    <div class="bento-card bento-small interactive" data-hover-lift>
        <div class="card-glow"></div>
        <div class="metric-icon gradient-medium">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="metric-value">45</div>
        <div class="metric-label">Medium Risk</div>
        <div class="metric-trend">
            <i class="fas fa-arrow-up"></i>
            <span>+3 Today</span>
        </div>
    </div>

    <!-- Low Risk -->
    <div class="bento-card bento-small interactive" data-hover-lift>
        <div class="card-glow"></div>
        <div class="metric-icon gradient-low">
            <i class="fas fa-check-circle"></i>
        </div>
        <div class="metric-value">127</div>
        <div class="metric-label">Low Risk</div>
        <div class="metric-trend">
            <i class="fas fa-check"></i>
            <span>Stable</span>
        </div>
    </div>

    <!-- AI Model Accuracy -->
    <div class="bento-card bento-small interactive" data-hover-lift>
        <div class="card-glow"></div>
        <div class="metric-icon gradient-risk">
            <i class="fas fa-brain"></i>
        </div>
        <div class="metric-value">94.2%</div>
        <div class="metric-label">AI Accuracy</div>
        <div class="metric-trend">
            <i class="fas fa-arrow-up"></i>
            <span>+1.2%</span>
        </div>
    </div>

    <!-- High Risk Patient List -->
    <div class="bento-card bento-featured" data-tilt>
        <div class="card-glow"></div>
        <div class="card-header">
            <div class="card-title">
                <i class="fas fa-users"></i>
                High Risk Patients
            </div>
            <span class="card-badge" style="background: rgba(245, 101, 101, 0.15); color: #f56565;">Urgent</span>
        </div>
        
        <div style="margin-top: 16px;">
            <div class="patient-risk-card">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                    <div>
                        <div style="font-weight: 600; color: #2D3748; font-size: 16px;">John Smith</div>
                        <div style="font-size: 13px; color: #718096; margin-top: 2px;">Age 68 • ID: #PT-2831 • Cardiology</div>
                    </div>
                    <span class="risk-badge-high">High Risk</span>
                </div>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <span style="background: rgba(245, 101, 101, 0.1); color: #f56565; padding: 4px 10px; border-radius: 6px; font-size: 12px;">Diabetes</span>
                    <span style="background: rgba(245, 101, 101, 0.1); color: #f56565; padding: 4px 10px; border-radius: 6px; font-size: 12px;">Hypertension</span>
                    <span style="background: rgba(245, 101, 101, 0.1); color: #f56565; padding: 4px 10px; border-radius: 6px; font-size: 12px;">Heart Disease</span>
                </div>
            </div>

            <div class="patient-risk-card">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                    <div>
                        <div style="font-weight: 600; color: #2D3748; font-size: 16px;">Maria Garcia</div>
                        <div style="font-size: 13px; color: #718096; margin-top: 2px;">Age 72 • ID: #PT-2829 • ICU</div>
                    </div>
                    <span class="risk-badge-high">High Risk</span>
                </div>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <span style="background: rgba(245, 101, 101, 0.1); color: #f56565; padding: 4px 10px; border-radius: 6px; font-size: 12px;">COPD</span>
                    <span style="background: rgba(245, 101, 101, 0.1); color: #f56565; padding: 4px 10px; border-radius: 6px; font-size: 12px;">Pneumonia</span>
                </div>
            </div>

            <div class="patient-risk-card">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                    <div>
                        <div style="font-weight: 600; color: #2D3748; font-size: 16px;">Robert Williams</div>
                        <div style="font-size: 13px; color: #718096; margin-top: 2px;">Age 55 • ID: #PT-2827 • Emergency</div>
                    </div>
                    <span class="risk-badge-high">High Risk</span>
                </div>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <span style="background: rgba(245, 101, 101, 0.1); color: #f56565; padding: 4px 10px; border-radius: 6px; font-size: 12px;">Stroke</span>
                    <span style="background: rgba(245, 101, 101, 0.1); color: #f56565; padding: 4px 10px; border-radius: 6px; font-size: 12px;">High BP</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Risk Factors Analysis -->
    <div class="bento-card bento-tall" data-hover-lift>
        <div class="card-glow"></div>
        <div class="card-title">
            <i class="fas fa-chart-bar"></i>
            Top Risk Factors
        </div>
        <div style="margin-top: 16px;">
            <div class="risk-factor">
                <i class="fas fa-heartbeat" style="color: #f56565;"></i>
                <div style="flex: 1;">
                    <div style="font-weight: 600; color: #2D3748; font-size: 14px;">Cardiovascular Disease</div>
                    <div style="height: 6px; background: #E2E8F0; border-radius: 3px; margin-top: 6px; overflow: hidden;">
                        <div style="width: 72%; height: 100%; background: #f56565;"></div>
                    </div>
                </div>
                <div style="font-weight: 700; color: #f56565;">72%</div>
            </div>

            <div class="risk-factor">
                <i class="fas fa-lungs" style="color: #f0ad4e;"></i>
                <div style="flex: 1;">
                    <div style="font-weight: 600; color: #2D3748; font-size: 14px;">Respiratory Issues</div>
                    <div style="height: 6px; background: #E2E8F0; border-radius: 3px; margin-top: 6px; overflow: hidden;">
                        <div style="width: 58%; height: 100%; background: #f0ad4e;"></div>
                    </div>
                </div>
                <div style="font-weight: 700; color: #f0ad4e;">58%</div>
            </div>

            <div class="risk-factor">
                <i class="fas fa-syringe" style="color: #f0ad4e;"></i>
                <div style="flex: 1;">
                    <div style="font-weight: 600; color: #2D3748; font-size: 14px;">Diabetes</div>
                    <div style="height: 6px; background: #E2E8F0; border-radius: 3px; margin-top: 6px; overflow: hidden;">
                        <div style="width: 45%; height: 100%; background: #f0ad4e;"></div>
                    </div>
                </div>
                <div style="font-weight: 700; color: #f0ad4e;">45%</div>
            </div>

            <div class="risk-factor">
                <i class="fas fa-brain" style="color: #48bb78;"></i>
                <div style="flex: 1;">
                    <div style="font-weight: 600; color: #2D3748; font-size: 14px;">Neurological</div>
                    <div style="height: 6px; background: #E2E8F0; border-radius: 3px; margin-top: 6px; overflow: hidden;">
                        <div style="width: 32%; height: 100%; background: #48bb78;"></div>
                    </div>
                </div>
                <div style="font-weight: 700; color: #48bb78;">32%</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
