{% extends "base.html" %}
{% load static %}

{% block title %}{{ patient.get_full_name }} — Vitals | HealthSphere AI{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{% url 'clinical_portal:vitals' %}" class="breadcrumb-link">Vitals</a></li>
<li class="breadcrumb-item breadcrumb-current">{{ patient.get_full_name }}</li>
{% endblock %}

{% block content %}
<div style="margin-bottom: 1.5rem;">
    <h1 style="font-size: 1.75rem; font-weight: 700; color: var(--neutral-900);">
        <i class="fas fa-heartbeat" style="color: var(--healthcare-danger); margin-right: .5rem;"></i>
        Vitals — {{ patient.get_full_name|default:patient.username }}
    </h1>
    <p style="color: var(--neutral-500); margin: .25rem 0 0;">Last {{ vitals|length }} readings in detail</p>
</div>

<div style="display: grid; gap: .875rem;">
    {% for v in vitals %}
    <div style="background: white; border: 1px solid var(--neutral-100); border-radius: var(--radius-xl); padding: 1.25rem; box-shadow: 0 1px 5px rgba(0,0,0,.04);">
        <div style="font-size: .8125rem; font-weight: 600; color: var(--neutral-500); margin-bottom: .875rem;">
            <i class="fas fa-clock" style="margin-right: .3rem;"></i>{{ v.recorded_at|date:"l, F j, Y — g:i A" }}
            {% if v.recorded_by %} · By {{ v.recorded_by.get_full_name }}{% endif %}
        </div>
        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: .75rem;">
            {% if v.heart_rate %}
            <div style="text-align: center; background: {% if v.heart_rate > 100 or v.heart_rate < 60 %}rgba(239,68,68,.08){% else %}var(--neutral-50){% endif %}; border-radius: var(--radius-lg); padding: .875rem;">
                <i class="fas fa-heart" style="color: var(--healthcare-danger); font-size: 1.25rem;"></i>
                <div style="font-size: 1.5rem; font-weight: 800; color: {% if v.heart_rate > 100 or v.heart_rate < 60 %}var(--healthcare-danger){% else %}var(--neutral-900){% endif %}; margin: .3rem 0 .1rem;">{{ v.heart_rate }}</div>
                <div style="font-size: .7rem; color: var(--neutral-500);">bpm</div>
                <div style="font-size: .65rem; font-weight: 700; text-transform: uppercase; letter-spacing: .05em; color: var(--neutral-400); margin-top: .2rem;">Heart Rate</div>
            </div>
            {% endif %}
            {% if v.temperature %}
            <div style="text-align: center; background: {% if v.temperature > 38.0 %}rgba(239,68,68,.08){% else %}var(--neutral-50){% endif %}; border-radius: var(--radius-lg); padding: .875rem;">
                <i class="fas fa-thermometer-half" style="color: var(--healthcare-warning); font-size: 1.25rem;"></i>
                <div style="font-size: 1.5rem; font-weight: 800; color: {% if v.temperature > 38.0 %}var(--healthcare-danger){% else %}var(--neutral-900){% endif %}; margin: .3rem 0 .1rem;">{{ v.temperature }}</div>
                <div style="font-size: .7rem; color: var(--neutral-500);">°C</div>
                <div style="font-size: .65rem; font-weight: 700; text-transform: uppercase; letter-spacing: .05em; color: var(--neutral-400); margin-top: .2rem;">Temperature</div>
            </div>
            {% endif %}
            {% if v.oxygen_saturation %}
            <div style="text-align: center; background: {% if v.oxygen_saturation < 95 %}rgba(239,68,68,.08){% else %}var(--neutral-50){% endif %}; border-radius: var(--radius-lg); padding: .875rem;">
                <i class="fas fa-lungs" style="color: var(--healthcare-primary); font-size: 1.25rem;"></i>
                <div style="font-size: 1.5rem; font-weight: 800; color: {% if v.oxygen_saturation < 95 %}var(--healthcare-danger){% else %}var(--neutral-900){% endif %}; margin: .3rem 0 .1rem;">{{ v.oxygen_saturation }}</div>
                <div style="font-size: .7rem; color: var(--neutral-500);">%</div>
                <div style="font-size: .65rem; font-weight: 700; text-transform: uppercase; letter-spacing: .05em; color: var(--neutral-400); margin-top: .2rem;">SpO₂</div>
            </div>
            {% endif %}
            {% if v.systolic_bp %}
            <div style="text-align: center; background: var(--neutral-50); border-radius: var(--radius-lg); padding: .875rem;">
                <i class="fas fa-tachometer-alt" style="color: var(--healthcare-accent); font-size: 1.25rem;"></i>
                <div style="font-size: 1.5rem; font-weight: 800; color: var(--neutral-900); margin: .3rem 0 .1rem;">{{ v.systolic_bp }}/{{ v.diastolic_bp }}</div>
                <div style="font-size: .7rem; color: var(--neutral-500);">mmHg</div>
                <div style="font-size: .65rem; font-weight: 700; text-transform: uppercase; letter-spacing: .05em; color: var(--neutral-400); margin-top: .2rem;">Blood Pressure</div>
            </div>
            {% endif %}
        </div>
    </div>
    {% empty %}
    <div style="text-align: center; padding: 3rem; color: var(--neutral-500);">
        <i class="fas fa-heartbeat" style="font-size: 2.5rem; color: var(--neutral-300); display: block; margin-bottom: 1rem;"></i>
        No vital signs recorded yet.
    </div>
    {% endfor %}
</div>
{% endblock %}
