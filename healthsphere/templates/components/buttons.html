{% comment %}
Button Component System - HealthSphere AI
==========================================

HTML Structure Examples:

<!-- Primary Button -->
<button class="healthcare-btn healthcare-btn-primary">
    <i class="fas fa-plus"></i>
    <span>Add Patient</span>
</button>

<!-- Secondary Button -->
<button class="healthcare-btn healthcare-btn-secondary healthcare-btn-lg">
    <span>Cancel</span>
</button>

<!-- Outline Button -->
<a href="#" class="healthcare-btn healthcare-btn-outline healthcare-btn-sm">
    <span>View Details</span>
    <i class="fas fa-arrow-right"></i>
</a>

<!-- Danger Button -->
<button class="healthcare-btn healthcare-btn-danger" data-confirm="Are you sure?">
    <i class="fas fa-trash"></i>
    <span>Delete</span>
</button>

<!-- Loading State -->
<button class="healthcare-btn healthcare-btn-primary healthcare-btn-loading" disabled>
    <span class="healthcare-btn-spinner"></span>
    <span>Processing...</span>
</button>

<!-- Icon Only Button -->
<button class="healthcare-btn healthcare-btn-secondary healthcare-btn-icon">
    <i class="fas fa-edit"></i>
</button>

Button Variants:
- healthcare-btn-primary: Main action buttons (blue)
- healthcare-btn-secondary: Secondary actions (gray)
- healthcare-btn-outline: Outlined buttons (transparent with border)
- healthcare-btn-danger: Destructive actions (red)
- healthcare-btn-success: Success actions (green)
- healthcare-btn-warning: Warning actions (orange)

Button Sizes:
- healthcare-btn-xs: Extra small
- healthcare-btn-sm: Small
- (default): Medium
- healthcare-btn-lg: Large
- healthcare-btn-xl: Extra large

Button States:
- healthcare-btn-loading: Loading spinner
- healthcare-btn-disabled: Disabled state
- healthcare-btn-icon: Icon-only button
- healthcare-btn-block: Full width button

{% endcomment %}

<style>
/* =============================================
   Healthcare Button Component System
   ============================================= */

/* Base Button Styles */
.healthcare-btn {
    /* Layout */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-2, 8px);
    padding: var(--spacing-3, 12px) var(--spacing-4, 16px);
    
    /* Typography */
    font-family: inherit;
    font-size: var(--font-size-sm, 14px);
    font-weight: var(--font-weight-medium, 500);
    line-height: 1.2;
    text-decoration: none;
    white-space: nowrap;
    
    /* Appearance */
    border: 1px solid transparent;
    border-radius: var(--radius-lg, 12px);
    background: var(--glass-bg, rgba(255, 255, 255, 0.8));
    backdrop-filter: var(--glass-blur, blur(10px));
    box-shadow: var(--glass-shadow-sm, 0 2px 8px rgba(0, 0, 0, 0.1));
    
    /* Interaction */
    cursor: pointer;
    user-select: none;
    transition: all var(--transition-fast, 0.2s ease);
    position: relative;
    overflow: hidden;
    
    /* Accessibility */
    outline: none;
    touch-action: manipulation;
}

.healthcare-btn:focus-visible {
    outline: 2px solid var(--healthcare-primary, #3b82f6);
    outline-offset: 2px;
}

.healthcare-btn:disabled,
.healthcare-btn.healthcare-btn-disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
}

/* Button Hover Effects */
.healthcare-btn:hover:not(:disabled):not(.healthcare-btn-disabled) {
    transform: translateY(-1px);
    box-shadow: var(--glass-shadow-md, 0 4px 16px rgba(0, 0, 0, 0.15));
}

.healthcare-btn:active:not(:disabled):not(.healthcare-btn-disabled) {
    transform: translateY(0);
    box-shadow: var(--glass-shadow-sm, 0 2px 8px rgba(0, 0, 0, 0.1));
}

/* Ripple Effect */
.healthcare-btn::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.3s ease, height 0.3s ease;
}

.healthcare-btn:active::after {
    width: 300px;
    height: 300px;
}

/* =============================================
   Button Variants
   ============================================= */

/* Primary Button */
.healthcare-btn-primary {
    background: linear-gradient(135deg, var(--healthcare-primary, #3b82f6), var(--healthcare-primary-light, #60a5fa));
    color: var(--neutral-white, #ffffff);
    border-color: var(--healthcare-primary, #3b82f6);
}

.healthcare-btn-primary:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--healthcare-primary-dark, #2563eb), var(--healthcare-primary, #3b82f6));
    border-color: var(--healthcare-primary-dark, #2563eb);
}

.healthcare-btn-primary:active:not(:disabled) {
    background: var(--healthcare-primary-dark, #2563eb);
}

/* Secondary Button */
.healthcare-btn-secondary {
    background: var(--glass-bg, rgba(255, 255, 255, 0.8));
    color: var(--text-primary, #1f2937);
    border-color: var(--glass-border, rgba(255, 255, 255, 0.2));
}

.healthcare-btn-secondary:hover:not(:disabled) {
    background: var(--neutral-100, #f3f4f6);
    color: var(--healthcare-primary, #3b82f6);
    border-color: var(--healthcare-primary, #3b82f6);
}

.healthcare-btn-secondary:active:not(:disabled) {
    background: var(--neutral-200, #e5e7eb);
}

/* Outline Button */
.healthcare-btn-outline {
    background: transparent;
    color: var(--healthcare-primary, #3b82f6);
    border-color: var(--healthcare-primary, #3b82f6);
    backdrop-filter: none;
    box-shadow: none;
}

.healthcare-btn-outline:hover:not(:disabled) {
    background: var(--healthcare-primary-bg, rgba(59, 130, 246, 0.04));
    border-color: var(--healthcare-primary-dark, #2563eb);
    color: var(--healthcare-primary-dark, #2563eb);
    box-shadow: var(--glass-shadow-sm, 0 2px 8px rgba(0, 0, 0, 0.1));
}

.healthcare-btn-outline:active:not(:disabled) {
    background: var(--healthcare-primary, #3b82f6);
    color: var(--neutral-white, #ffffff);
}

/* Danger Button */
.healthcare-btn-danger {
    background: linear-gradient(135deg, var(--healthcare-danger, #ef4444), var(--healthcare-danger-light, #f87171));
    color: var(--neutral-white, #ffffff);
    border-color: var(--healthcare-danger, #ef4444);
}

.healthcare-btn-danger:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--healthcare-danger-dark, #dc2626), var(--healthcare-danger, #ef4444));
    border-color: var(--healthcare-danger-dark, #dc2626);
}

.healthcare-btn-danger:active:not(:disabled) {
    background: var(--healthcare-danger-dark, #dc2626);
}

/* Success Button */
.healthcare-btn-success {
    background: linear-gradient(135deg, var(--healthcare-success, #10b981), var(--healthcare-success-light, #34d399));
    color: var(--neutral-white, #ffffff);
    border-color: var(--healthcare-success, #10b981);
}

.healthcare-btn-success:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--healthcare-success-dark, #059669), var(--healthcare-success, #10b981));
    border-color: var(--healthcare-success-dark, #059669);
}

.healthcare-btn-success:active:not(:disabled) {
    background: var(--healthcare-success-dark, #059669);
}

/* Warning Button */
.healthcare-btn-warning {
    background: linear-gradient(135deg, var(--healthcare-warning, #f59e0b), var(--healthcare-warning-light, #fbbf24));
    color: var(--neutral-white, #ffffff);
    border-color: var(--healthcare-warning, #f59e0b);
}

.healthcare-btn-warning:hover:not(:disabled) {
    background: linear-gradient(135deg, var(--healthcare-warning-dark, #d97706), var(--healthcare-warning, #f59e0b));
    border-color: var(--healthcare-warning-dark, #d97706);
}

.healthcare-btn-warning:active:not(:disabled) {
    background: var(--healthcare-warning-dark, #d97706);
}

/* =============================================
   Button Sizes
   ============================================= */

/* Extra Small */
.healthcare-btn-xs {
    padding: var(--spacing-1, 4px) var(--spacing-2, 8px);
    font-size: var(--font-size-xs, 12px);
    border-radius: var(--radius-md, 8px);
    gap: var(--spacing-1, 4px);
}

/* Small */
.healthcare-btn-sm {
    padding: var(--spacing-2, 8px) var(--spacing-3, 12px);
    font-size: var(--font-size-sm, 14px);
    border-radius: var(--radius-md, 8px);
    gap: var(--spacing-1, 4px);
}

/* Large */
.healthcare-btn-lg {
    padding: var(--spacing-4, 16px) var(--spacing-6, 24px);
    font-size: var(--font-size-base, 16px);
    border-radius: var(--radius-xl, 16px);
    gap: var(--spacing-3, 12px);
}

/* Extra Large */
.healthcare-btn-xl {
    padding: var(--spacing-5, 20px) var(--spacing-8, 32px);
    font-size: var(--font-size-lg, 18px);
    font-weight: var(--font-weight-semibold, 600);
    border-radius: var(--radius-xl, 16px);
    gap: var(--spacing-3, 12px);
}

/* =============================================
   Button States & Modifiers
   ============================================= */

/* Icon Only Button */
.healthcare-btn-icon {
    padding: var(--spacing-3, 12px);
    aspect-ratio: 1;
    border-radius: var(--radius-lg, 12px);
}

.healthcare-btn-icon.healthcare-btn-xs {
    padding: var(--spacing-1, 4px);
    border-radius: var(--radius-md, 8px);
}

.healthcare-btn-icon.healthcare-btn-sm {
    padding: var(--spacing-2, 8px);
    border-radius: var(--radius-md, 8px);
}

.healthcare-btn-icon.healthcare-btn-lg {
    padding: var(--spacing-4, 16px);
    border-radius: var(--radius-xl, 16px);
}

.healthcare-btn-icon.healthcare-btn-xl {
    padding: var(--spacing-5, 20px);
    border-radius: var(--radius-xl, 16px);
}

/* Block Button */
.healthcare-btn-block {
    width: 100%;
    justify-content: center;
}

/* Loading State */
.healthcare-btn-loading {
    pointer-events: none;
    position: relative;
}

.healthcare-btn-loading .healthcare-btn-content {
    opacity: 0.6;
}

.healthcare-btn-spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid currentColor;
    border-top-color: transparent;
    border-radius: 50%;
    animation: healthcare-btn-spin 1s linear infinite;
}

@keyframes healthcare-btn-spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* =============================================
   Button Groups
   ============================================= */

.healthcare-btn-group {
    display: inline-flex;
    background: var(--glass-bg, rgba(255, 255, 255, 0.8));
    backdrop-filter: var(--glass-blur, blur(10px));
    border: 1px solid var(--glass-border, rgba(255, 255, 255, 0.2));
    border-radius: var(--radius-lg, 12px);
    padding: var(--spacing-1, 4px);
    box-shadow: var(--glass-shadow-sm, 0 2px 8px rgba(0, 0, 0, 0.1));
}

.healthcare-btn-group .healthcare-btn {
    border: none;
    box-shadow: none;
    backdrop-filter: none;
    background: transparent;
    margin: 0;
    border-radius: var(--radius-md, 8px);
}

.healthcare-btn-group .healthcare-btn:hover:not(:disabled) {
    background: var(--neutral-100, #f3f4f6);
    transform: none;
}

.healthcare-btn-group .healthcare-btn.active {
    background: var(--healthcare-primary, #3b82f6);
    color: var(--neutral-white, #ffffff);
}

/* =============================================
   Responsive Design
   ============================================= */

@media (max-width: 768px) {
    .healthcare-btn {
        padding: var(--spacing-3, 12px) var(--spacing-4, 16px);
        font-size: var(--font-size-base, 16px); /* Prevent zoom on iOS */
        min-height: 44px; /* Minimum touch target */
    }
    
    .healthcare-btn-xs {
        min-height: 32px;
        font-size: var(--font-size-sm, 14px);
    }
    
    .healthcare-btn-sm {
        min-height: 36px;
        font-size: var(--font-size-sm, 14px);
    }
    
    .healthcare-btn-lg {
        min-height: 52px;
        font-size: var(--font-size-lg, 18px);
    }
    
    .healthcare-btn-xl {
        min-height: 60px;
        font-size: var(--font-size-xl, 20px);
    }
    
    /* Stack button groups on mobile */
    .healthcare-btn-group-responsive {
        flex-direction: column;
        width: 100%;
    }
    
    .healthcare-btn-group-responsive .healthcare-btn {
        width: 100%;
    }
}

/* =============================================
   Special Button Types
   ============================================= */

/* Floating Action Button */
.healthcare-btn-fab {
    position: fixed;
    bottom: var(--spacing-6, 24px);
    right: var(--spacing-6, 24px);
    width: 56px;
    height: 56px;
    border-radius: 50%;
    box-shadow: var(--glass-shadow-xl, 0 12px 48px rgba(0, 0, 0, 0.15));
    z-index: 1000;
    padding: 0;
}

.healthcare-btn-fab:hover {
    transform: translateY(-2px);
    box-shadow: var(--glass-shadow-2xl, 0 20px 64px rgba(0, 0, 0, 0.2));
}

/* Ghost Button */
.healthcare-btn-ghost {
    background: transparent;
    border: none;
    box-shadow: none;
    backdrop-filter: none;
    color: var(--text-secondary, #6b7280);
}

.healthcare-btn-ghost:hover:not(:disabled) {
    background: var(--neutral-100, #f3f4f6);
    color: var(--text-primary, #1f2937);
    box-shadow: var(--glass-shadow-sm, 0 2px 8px rgba(0, 0, 0, 0.1));
}

/* Link Button */
.healthcare-btn-link {
    background: none;
    border: none;
    box-shadow: none;
    backdrop-filter: none;
    color: var(--healthcare-primary, #3b82f6);
    text-decoration: underline;
    text-underline-offset: 2px;
    padding: var(--spacing-1, 4px) var(--spacing-2, 8px);
}

.healthcare-btn-link:hover:not(:disabled) {
    color: var(--healthcare-primary-dark, #2563eb);
    text-decoration-thickness: 2px;
    transform: none;
    box-shadow: none;
}

/* =============================================
   Print Styles
   ============================================= */

@media print {
    .healthcare-btn {
        background: transparent !important;
        color: #000 !important;
        border: 1px solid #000 !important;
        box-shadow: none !important;
        transform: none !important;
    }
    
    .healthcare-btn-fab {
        display: none !important;
    }
}

/* =============================================
   Dark Mode Support
   ============================================= */

@media (prefers-color-scheme: dark) {
    .healthcare-btn-secondary {
        background: rgba(17, 24, 39, 0.8);
        color: var(--neutral-white, #ffffff);
        border-color: rgba(75, 85, 99, 0.3);
    }
    
    .healthcare-btn-secondary:hover:not(:disabled) {
        background: rgba(31, 41, 55, 0.8);
        border-color: var(--healthcare-primary, #3b82f6);
    }
    
    .healthcare-btn-ghost:hover:not(:disabled) {
        background: rgba(31, 41, 55, 0.8);
        color: var(--neutral-white, #ffffff);
    }
}

/* =============================================
   Accessibility Enhancements
   ============================================= */

/* High contrast mode */
@media (prefers-contrast: high) {
    .healthcare-btn {
        border-width: 2px;
    }
    
    .healthcare-btn-outline {
        border-width: 3px;
    }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    .healthcare-btn {
        transition: none;
    }
    
    .healthcare-btn::after {
        display: none;
    }
    
    .healthcare-btn-spinner {
        animation: none;
    }
    
    .healthcare-btn:hover {
        transform: none;
    }
}

/* Focus visible for keyboard navigation */
.healthcare-btn:focus-visible {
    outline: 3px solid var(--healthcare-primary, #3b82f6);
    outline-offset: 2px;
}
</style>

<script>
// Healthcare Button Component JavaScript
document.addEventListener('DOMContentLoaded', function() {
    initializeHealthcareButtons();
});

function initializeHealthcareButtons() {
    // Add ripple effect to buttons
    document.querySelectorAll('.healthcare-btn').forEach(button => {
        button.addEventListener('click', function(e) {
            if (this.disabled || this.classList.contains('healthcare-btn-disabled')) {
                return;
            }
            
            createRippleEffect(this, e);
        });
    });
    
    // Handle confirmation dialogs
    document.querySelectorAll('[data-confirm]').forEach(button => {
        button.addEventListener('click', function(e) {
            const message = this.dataset.confirm;
            if (!confirm(message)) {
                e.preventDefault();
                e.stopPropagation();
                return false;
            }
        });
    });
    
    // Handle loading states
    document.querySelectorAll('[data-loading-text]').forEach(button => {
        button.addEventListener('click', function() {
            showButtonLoading(this);
        });
    });
}

function createRippleEffect(button, event) {
    const ripple = document.createElement('span');
    const rect = button.getBoundingClientRect();
    const size = Math.max(rect.width, rect.height);
    const x = event.clientX - rect.left - size / 2;
    const y = event.clientY - rect.top - size / 2;
    
    ripple.style.cssText = `
        position: absolute;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.3);
        width: ${size}px;
        height: ${size}px;
        left: ${x}px;
        top: ${y}px;
        pointer-events: none;
        animation: ripple 0.6s ease-out;
        z-index: 1;
    `;
    
    // Add ripple animation styles if not already present
    if (!document.getElementById('ripple-styles')) {
        const style = document.createElement('style');
        style.id = 'ripple-styles';
        style.textContent = `
            @keyframes ripple {
                0% {
                    transform: scale(0);
                    opacity: 1;
                }
                100% {
                    transform: scale(2);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    }
    
    button.appendChild(ripple);
    
    setTimeout(() => {
        if (ripple.parentNode) {
            ripple.parentNode.removeChild(ripple);
        }
    }, 600);
}

function showButtonLoading(button) {
    const originalText = button.textContent;
    const loadingText = button.dataset.loadingText || 'Loading...';
    
    button.classList.add('healthcare-btn-loading');
    button.disabled = true;
    
    // Create spinner and text
    const spinner = document.createElement('span');
    spinner.className = 'healthcare-btn-spinner';
    
    const textSpan = document.createElement('span');
    textSpan.textContent = loadingText;
    
    // Clear button and add loading content
    button.innerHTML = '';
    button.appendChild(spinner);
    button.appendChild(textSpan);
    
    // Store original content for restoration
    button.dataset.originalContent = originalText;
}

function hideButtonLoading(button) {
    button.classList.remove('healthcare-btn-loading');
    button.disabled = false;
    button.textContent = button.dataset.originalContent || 'Button';
    delete button.dataset.originalContent;
}

// Button group functionality
function initializeButtonGroups() {
    document.querySelectorAll('.healthcare-btn-group').forEach(group => {
        const buttons = group.querySelectorAll('.healthcare-btn');
        
        buttons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons in group
                buttons.forEach(btn => btn.classList.remove('active'));
                
                // Add active class to clicked button
                this.classList.add('active');
                
                // Dispatch custom event
                const event = new CustomEvent('buttonGroupChange', {
                    detail: {
                        selectedButton: this,
                        value: this.dataset.value || this.textContent.trim()
                    }
                });
                group.dispatchEvent(event);
            });
        });
    });
}

// Initialize button groups
document.addEventListener('DOMContentLoaded', initializeButtonGroups);

// Export utility functions
window.HealthcareButton = {
    showLoading: showButtonLoading,
    hideLoading: hideButtonLoading,
    createRipple: createRippleEffect
};
</script>

<!-- Usage Examples in HTML -->
<div style="display: none;">
    <!-- Example: Basic Buttons -->
    <div class="example-buttons" style="display: flex; gap: 16px; flex-wrap: wrap; padding: 24px;">
        <button class="healthcare-btn healthcare-btn-primary">
            <i class="fas fa-plus"></i>
            <span>Add Patient</span>
        </button>
        
        <button class="healthcare-btn healthcare-btn-secondary">
            <span>Cancel</span>
        </button>
        
        <button class="healthcare-btn healthcare-btn-outline">
            <span>View Details</span>
            <i class="fas fa-arrow-right"></i>
        </button>
        
        <button class="healthcare-btn healthcare-btn-danger">
            <i class="fas fa-trash"></i>
            <span>Delete</span>
        </button>
    </div>
    
    <!-- Example: Button Sizes -->
    <div class="example-sizes" style="display: flex; align-items: center; gap: 16px; padding: 24px;">
        <button class="healthcare-btn healthcare-btn-primary healthcare-btn-xs">Extra Small</button>
        <button class="healthcare-btn healthcare-btn-primary healthcare-btn-sm">Small</button>
        <button class="healthcare-btn healthcare-btn-primary">Medium</button>
        <button class="healthcare-btn healthcare-btn-primary healthcare-btn-lg">Large</button>
        <button class="healthcare-btn healthcare-btn-primary healthcare-btn-xl">Extra Large</button>
    </div>
    
    <!-- Example: Icon Buttons -->
    <div class="example-icons" style="display: flex; gap: 8px; padding: 24px;">
        <button class="healthcare-btn healthcare-btn-primary healthcare-btn-icon">
            <i class="fas fa-edit"></i>
        </button>
        <button class="healthcare-btn healthcare-btn-secondary healthcare-btn-icon">
            <i class="fas fa-share"></i>
        </button>
        <button class="healthcare-btn healthcare-btn-outline healthcare-btn-icon">
            <i class="fas fa-download"></i>
        </button>
        <button class="healthcare-btn healthcare-btn-danger healthcare-btn-icon">
            <i class="fas fa-trash"></i>
        </button>
    </div>
    
    <!-- Example: Button Group -->
    <div class="healthcare-btn-group" style="margin: 24px;">
        <button class="healthcare-btn active" data-value="day">Day</button>
        <button class="healthcare-btn" data-value="week">Week</button>
        <button class="healthcare-btn" data-value="month">Month</button>
        <button class="healthcare-btn" data-value="year">Year</button>
    </div>
    
    <!-- Example: Loading Button -->
    <button class="healthcare-btn healthcare-btn-primary" data-loading-text="Saving...">
        <span>Save Changes</span>
    </button>
    
    <!-- Example: Confirmation Button -->
    <button class="healthcare-btn healthcare-btn-danger" data-confirm="Are you sure you want to delete this patient record?">
        <i class="fas fa-trash"></i>
        <span>Delete Patient</span>
    </button>
</div>