{% extends "base_simple.html" %}
{% load static %}

{% block title %}Admin Dashboard - HealthSphere AI{% endblock %}

{% block sidebar_nav %}
<!-- Admin Navigation -->
<div class="nav-section">
    <div class="nav-section-title">Main</div>
    <div class="nav-item">
        <a href="{% url 'admin_portal:dashboard' %}" class="nav-link active">
            <i class="fas fa-th-large"></i>
            <span class="nav-link-text">Dashboard</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="{% url 'admin_portal:analytics' %}" class="nav-link">
            <i class="fas fa-chart-line"></i>
            <span class="nav-link-text">Analytics</span>
        </a>
    </div>
</div>

<div class="nav-section">
    <div class="nav-section-title">Management</div>
    <div class="nav-item">
        <a href="{% url 'admin_portal:patients' %}" class="nav-link">
            <i class="fas fa-users"></i>
            <span class="nav-link-text">Patients</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="{% url 'admin_portal:resources' %}" class="nav-link">
            <i class="fas fa-box"></i>
            <span class="nav-link-text">Resources</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="/django-admin/" class="nav-link">
            <i class="fas fa-cog"></i>
            <span class="nav-link-text">System Admin</span>
        </a>
    </div>
</div>

<div class="nav-section">
    <div class="nav-section-title">Healthcare Systems</div>
    <div class="nav-item">
        <a href="/django-admin/appointments/" class="nav-link">
            <i class="fas fa-calendar-check"></i>
            <span class="nav-link-text">Appointments</span>
            <span class="nav-badge">12</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="/django-admin/prescriptions/" class="nav-link">
            <i class="fas fa-prescription"></i>
            <span class="nav-link-text">Prescriptions</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="/django-admin/telemedicine/" class="nav-link">
            <i class="fas fa-video"></i>
            <span class="nav-link-text">Telemedicine</span>
        </a>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
/* ===== Modular Grid Dashboard ===== */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--spacing-5);
    margin-bottom: var(--spacing-6);
}

/* ===== Card Base Styles ===== */
.module-card {
    background: white;
    border-radius: var(--radius-xl);
    padding: var(--spacing-6);
    box-shadow: var(--card-shadow);
    transition: all var(--transition-normal);
    display: flex;
    flex-direction: column;
}

.module-card:hover {
    box-shadow: var(--card-shadow-hover);
    transform: translateY(-2px);
}

.module-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--spacing-4);
}

.module-title {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.module-icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-2xl);
    color: white;
    flex-shrink: 0;
}

/* Color Variants */
.module-coral {
    background: var(--color-coral);
}

.module-blue {
    background: var(--color-blue);
}

.module-green {
    background: var(--color-green);
}

.module-peach {
    background: var(--color-peach);
}

.module-lavender {
    background: var(--color-lavender);
}

/* ===== Greeting Card ===== */
.greeting-card {
    grid-column: span 2;
    background: linear-gradient(135deg, #f5f0e8 0%, #ede7dc 100%);
    padding: var(--spacing-8);
    position: relative;
    overflow: hidden;
}

.greeting-card::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(232, 155, 135, 0.1) 0%, transparent 70%);
    border-radius: var(--radius-full);
}

.greeting-title {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--text-primary);
    margin-bottom: var(--spacing-2);
}

.greeting-subtitle {
    color: var(--text-secondary);
    font-size: var(--font-size-base);
    margin-bottom: var(--spacing-6);
}

.greeting-action {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-3) var(--spacing-6);
    background: var(--color-coral);
    color: white;
    text-decoration: none;
    border-radius: var(--radius-lg);
    font-weight: var(--font-weight-medium);
    transition: all var(--transition-normal);
}

.greeting-action:hover {
    background: var(--color-coral-light);
    transform: translateY(-2px);
}

/* ===== Stat Card ===== */
.stat-value {
    font-size: var(--font-size-4xl);
    font-weight: var(--font-weight-bold);
    color: var(--text-primary);
    margin-bottom: var(--spacing-2);
    line-height: 1;
}

.stat-label {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--spacing-4);
}

.stat-trend {
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-1);
    padding: var(--spacing-1) var(--spacing-3);
    background: rgba(168, 197, 168, 0.2);
    color: var(--color-green);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
}

.stat-trend.negative {
    background: rgba(232, 155, 135, 0.2);
    color: var(--color-coral);
}

/* ===== Progress Circles ===== */
.progress-circles {
    display: flex;
    gap: var(--spacing-4);
    margin-top: var(--spacing-4);
}

.progress-circle {
    flex: 1;
    text-align: center;
}

.circle-wrap {
    width: 64px;
    height: 64px;
    margin: 0 auto var(--spacing-2);
    border-radius: var(--radius-full);
    border: 4px solid var(--neutral-200);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.circle-percent {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-bold);
    color: var(--text-primary);
}

.circle-label {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

/* ===== Mini Charts ===== */
.mini-chart {
    height: 80px;
    background: linear-gradient(135deg, var(--color-blue-light) 0%, var(--color-blue) 100%);
    border-radius: var(--radius-lg);
    margin-top: var(--spacing-4);
    position: relative;
    overflow: hidden;
}

.chart-bar {
    position: absolute;
    bottom: 0;
    width: 12%;
    background: rgba(255, 255, 255, 0.5);
    border-radius: var(--radius-sm) var(--radius-sm) 0 0;
}

/* ===== Activity List ===== */
.activity-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-3);
}

.activity-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-3);
    padding: var(--spacing-3);
    background: var(--neutral-50);
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
}

.activity-item:hover {
    background: var(--neutral-100);
}

.activity-avatar {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-full);
    background: var(--color-blue-light);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: var(--font-weight-bold);
    color: var(--text-primary);
    flex-shrink: 0;
}

.activity-content {
    flex: 1;
    min-width: 0;
}

.activity-title {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
    margin-bottom: 2px;
}

.activity-time {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

.activity-status {
    padding: var(--spacing-1) var(--spacing-3);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    background: var(--color-green);
    color: white;
}

/* ===== Quick Actions ===== */
.quick-actions {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-3);
    margin-top: var(--spacing-4);
}

.action-btn {
    padding: var(--spacing-4);
    background: var(--neutral-50);
    border-radius: var(--radius-lg);
    text-decoration: none;
    color: var(--text-primary);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
}

.action-btn:hover {
    background: var(--color-blue-light);
    color: var(--text-primary);
    transform: translateY(-2px);
}

.action-btn i {
    font-size: var(--font-size-lg);
}

/* ===== Wide Cards ===== */
.card-wide {
    grid-column: span 2;
}

.card-full {
    grid-column: 1 / -1;
}

/* ===== Icon Grid ===== */
.icon-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-4);
    margin-top: var(--spacing-4);
}

.icon-item {
    text-align: center;
}

.icon-badge {
    width: 56px;
    height: 56px;
    margin: 0 auto var(--spacing-2);
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-2xl);
    color: white;
}

.icon-label {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    font-weight: var(--font-weight-medium);
}

@media (max-width: 1200px) {
    .dashboard-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    }
    
    .greeting-card,
    .card-wide {
        grid-column: span 1;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="main-content">
    <!-- Dashboard Grid -->
    <div class="dashboard-grid">
        
        <!-- Greeting Card -->
        <div class="module-card greeting-card">
            <div class="greeting-title">Good Morning, {{ user.get_full_name|default:user.username }}!</div>
            <div class="greeting-subtitle">
                Here's an overview of your hospital management system. Everything is running smoothly today.
            </div>
            <a href="#" class="greeting-action">
                <i class="fas fa-chart-line"></i>
                View Full Report
            </a>
        </div>
        
        <!-- Alerts Card -->
        <div class="module-card">
            <div class="module-header">
                <div class="module-title">Alerts</div>
                <div class="module-icon module-coral">
                    <i class="fas fa-bell"></i>
                </div>
            </div>
            <div class="stat-value">8</div>
            <div class="stat-label">Active Alerts</div>
            <div class="stat-trend">
                <i class="fas fa-arrow-up"></i>
                2 new today
            </div>
        </div>
        
        <!-- Patients Card -->
        <div class="module-card">
            <div class="module-header">
                <div class="module-title">Patients</div>
                <div class="module-icon module-blue">
                    <i class="fas fa-users"></i>
                </div>
            </div>
            <div class="stat-value">2,847</div>
            <div class="stat-label">Total Patients</div>
            <div class="stat-trend">
                <i class="fas fa-arrow-up"></i>
                12% increase
            </div>
        </div>
        
        <!-- Reminders/Consultations Card -->
        <div class="module-card">
            <div class="module-header">
                <div class="module-title">Consultations</div>
                <div class="module-icon module-blue">
                    <i class="fas fa-stethoscope"></i>
                </div>
            </div>
            <div class="progress-circles">
                <div class="progress-circle">
                    <div class="circle-wrap" style="border-color: var(--color-blue);">
                        <span class="circle-percent">78</span>
                    </div>
                    <div class="circle-label">Scheduled</div>
                </div>
                <div class="progress-circle">
                    <div class="circle-wrap" style="border-color: var(--color-green);">
                        <span class="circle-percent">92</span>
                    </div>
                    <div class="circle-label">Completed</div>
                </div>
                <div class="progress-circle">
                    <div class="circle-wrap" style="border-color: var(--color-coral);">
                        <span class="circle-percent">15</span>
                    </div>
                    <div class="circle-label">Pending</div>
                </div>
            </div>
        </div>
        
        <!-- Upcoming Appointments -->
        <div class="module-card">
            <div class="module-header">
                <div class="module-title">Upcoming Appointments</div>
                <div class="module-icon module-coral">
                    <i class="fas fa-calendar-check"></i>
                </div>
            </div>
            <div class="stat-value">143</div>
            <div class="stat-label">Today's Appointments</div>
            <div class="stat-trend">
                <i class="fas fa-arrow-up"></i>
                8% increase
            </div>
        </div>
        
        <!-- Health Analytics -->
        <div class="module-card">
            <div class="module-header">
                <div class="module-title">Health Analytics</div>
                <div class="module-icon module-green">
                    <i class="fas fa-shield-alt"></i>
                </div>
            </div>
            <div class="stat-value">94.7%</div>
            <div class="stat-label">Overall Health Score</div>
            <div class="stat-trend">
                <i class="fas fa-arrow-up"></i>
                2.1% improvement
            </div>
        </div>
        
        <!-- AI Rush Score with Chart -->
        <div class="module-card card-wide">
            <div class="module-header">
                <div class="module-title">AI Rush Score</div>
                <select style="padding: 4px 12px; border-radius: 8px; border: 1px solid var(--neutral-200); background: white; color: var(--text-primary); font-size: 0.875rem;">
                    <option>Last 7 Days</option>
                    <option>Last 30 Days</option>
                    <option>Last 90 Days</option>
                </select>
            </div>
            <div class="stat-value" style="color: var(--color-green);">91%</div>
            <div class="stat-label">Average Performance Score</div>
            <div class="mini-chart">
                <div class="chart-bar" style="left: 5%; height: 45%;"></div>
                <div class="chart-bar" style="left: 20%; height: 60%;"></div>
                <div class="chart-bar" style="left: 35%; height: 55%;"></div>
                <div class="chart-bar" style="left: 50%; height: 75%;"></div>
                <div class="chart-bar" style="left: 65%; height: 85%;"></div>
                <div class="chart-bar" style="left: 80%; height: 70%;"></div>
            </div>
        </div>
        
        <!-- Anonymous Staff Card -->
        <div class="module-card">
            <div class="module-header">
                <div class="module-title">Active Staff</div>
                <div class="module-icon module-peach">
                    <i class="fas fa-user-md"></i>
                </div>
            </div>
            <div class="stat-value">124</div>
            <div class="stat-label">On Duty Today</div>
            <div class="stat-trend">
                <i class="fas fa-check"></i>
                Full capacity
            </div>
        </div>
        
        <!-- Enrollment Status with Bar Chart -->
        <div class="module-card">
            <div class="module-header">
                <div class="module-title">Bed Occupancy</div>
                <i class="fas fa-bed" style="color: var(--text-secondary);"></i>
            </div>
            <div class="stat-value">78%</div>
            <div class="stat-label">Current Occupancy</div>
            <div class="mini-chart" style="background: linear-gradient(135deg, var(--color-peach) 0%, var(--color-coral) 100%);">
                <div class="chart-bar" style="left: 8%; height: 40%;"></div>
                <div class="chart-bar" style="left: 24%; height: 65%;"></div>
                <div class="chart-bar" style="left: 40%; height: 50%;"></div>
                <div class="chart-bar" style="left: 56%; height: 78%;"></div>
                <div class="chart-bar" style="left: 72%; height: 55%;"></div>
                <div class="chart-bar" style="left: 88%; height: 45%;"></div>
            </div>
        </div>
        
        <!-- Recent Activity -->
        <div class="module-card card-wide">
            <div class="module-header">
                <div class="module-title">Recent Activity</div>
                <a href="#" style="color: var(--color-blue); text-decoration: none; font-size: 0.875rem;">View All</a>
            </div>
            <div class="activity-list">
                <div class="activity-item">
                    <div class="activity-avatar">JD</div>
                    <div class="activity-content">
                        <div class="activity-title">Dr. Jane Doe completed consultation</div>
                        <div class="activity-time">2 minutes ago</div>
                    </div>
                    <div class="activity-status">Complete</div>
                </div>
                <div class="activity-item">
                    <div class="activity-avatar">RS</div>
                    <div class="activity-content">
                        <div class="activity-title">New patient registration - Robert Smith</div>
                        <div class="activity-time">15 minutes ago</div>
                    </div>
                    <div class="activity-status" style="background: var(--color-blue);">New</div>
                </div>
                <div class="activity-item">
                    <div class="activity-avatar">MJ</div>
                    <div class="activity-content">
                        <div class="activity-title">Lab results uploaded for Michael Johnson</div>
                        <div class="activity-time">1 hour ago</div>
                    </div>
                    <div class="activity-status">Complete</div>
                </div>
            </div>
        </div>
        
        <!-- Quick Actions -->
        <div class="module-card">
            <div class="module-header">
                <div class="module-title">Quick Actions</div>
            </div>
            <div class="quick-actions">
                <a href="#" class="action-btn">
                    <i class="fas fa-user-plus"></i>
                    Add Patient
                </a>
                <a href="#" class="action-btn">
                    <i class="fas fa-calendar-plus"></i>
                    Schedule
                </a>
                <a href="#" class="action-btn">
                    <i class="fas fa-file-medical"></i>
                    New Report
                </a>
                <a href="#" class="action-btn">
                    <i class="fas fa-pills"></i>
                    Prescription
                </a>
            </div>
        </div>
        
        <!-- Healthcare Services -->
        <div class="module-card">
            <div class="module-header">
                <div class="module-title">Healthcare Services</div>
            </div>
            <div class="icon-grid">
                <div class="icon-item">
                    <div class="icon-badge module-blue">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <div class="icon-label">Cardiology</div>
                </div>
                <div class="icon-item">
                    <div class="icon-badge module-green">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="icon-label">Neurology</div>
                </div>
                <div class="icon-item">
                    <div class="icon-badge module-coral">
                        <i class="fas fa-syringe"></i>
                    </div>
                    <div class="icon-label">Vaccination</div>
                </div>
                <div class="icon-item">
                    <div class="icon-badge module-peach">
                        <i class="fas fa-x-ray"></i>
                    </div>
                    <div class="icon-label">Radiology</div>
                </div>
                <div class="icon-item">
                    <div class="icon-badge module-lavender">
                        <i class="fas fa-tooth"></i>
                    </div>
                    <div class="icon-label">Dental</div>
                </div>
                <div class="icon-item">
                    <div class="icon-badge module-blue">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="icon-label">Ophthalmology</div>
                </div>
            </div>
        </div>
        
    </div>
</div>
{% endblock %}
