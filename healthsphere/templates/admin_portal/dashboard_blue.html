{% extends "base_simple.html" %}
{% load static %}

{% block title %}Admin Dashboard - HealthSphere AI{% endblock %}

{% block sidebar_nav %}
<!-- Admin Navigation -->
<div class="nav-section">
    <div class="nav-section-title">Main</div>
    <div class="nav-item">
        <a href="{% url 'admin_portal:dashboard' %}" class="nav-link active">
            <i class="fas fa-th-large"></i>
            <span class="nav-link-text">Dashboard</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="{% url 'admin_portal:analytics' %}" class="nav-link">
            <i class="fas fa-chart-line"></i>
            <span class="nav-link-text">Analytics</span>
        </a>
    </div>
</div>

<div class="nav-section">
    <div class="nav-section-title">Management</div>
    <div class="nav-item">
        <a href="{% url 'admin_portal:patients' %}" class="nav-link">
            <i class="fas fa-users"></i>
            <span class="nav-link-text">Patients</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="{% url 'admin_portal:resources' %}" class="nav-link">
            <i class="fas fa-box"></i>
            <span class="nav-link-text">Resources</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="/django-admin/" class="nav-link">
            <i class="fas fa-cog"></i>
            <span class="nav-link-text">System Admin</span>
        </a>
    </div>
</div>

<div class="nav-section">
    <div class="nav-section-title">Healthcare Systems</div>
    <div class="nav-item">
        <a href="/django-admin/appointments/" class="nav-link">
            <i class="fas fa-calendar-check"></i>
            <span class="nav-link-text">Appointments</span>
            <span class="nav-badge">12</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="/django-admin/prescriptions/" class="nav-link">
            <i class="fas fa-prescription"></i>
            <span class="nav-link-text">Prescriptions</span>
        </a>
    </div>
    <div class="nav-item">
        <a href="/django-admin/telemedicine/" class="nav-link">
            <i class="fas fa-video"></i>
            <span class="nav-link-text">Telemedicine</span>
        </a>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
/* ===== Metric Cards ===== */
.metrics-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--spacing-6);
    margin-bottom: var(--spacing-6);
}

.metric-card {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    padding: var(--spacing-6);
    box-shadow: var(--glass-shadow-lg);
    position: relative;
    overflow: hidden;
    transition: all var(--transition-fast);
}

.metric-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--healthcare-primary) 0%, var(--healthcare-accent) 100%);
}

.metric-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--glass-shadow-xl);
}

.metric-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-4);
}

.metric-icon {
    width: 50px;
    height: 50px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xl);
    background: linear-gradient(135deg, var(--healthcare-primary) 0%, var(--healthcare-accent) 100%);
    color: white;
    box-shadow: var(--glass-shadow-md);
}

.metric-trend {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-1) var(--spacing-3);
    background: rgba(16, 185, 129, 0.1);
    color: var(--healthcare-success);
    border-radius: var(--radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
}

.metric-trend.down {
    background: rgba(239, 68, 68, 0.1);
    color: var(--healthcare-danger);
}

.metric-value {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--text-primary);
    margin-bottom: var(--spacing-2);
}

.metric-label {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    font-weight: var(--font-weight-medium);
}

.metric-footer {
    margin-top: var(--spacing-4);
    padding-top: var(--spacing-4);
    border-top: 1px solid var(--glass-border);
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

/* ===== Chart Cards ===== */
.chart-card {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    padding: var(--spacing-6);
    box-shadow: var(--glass-shadow-lg);
    margin-bottom: var(--spacing-6);
}

.chart-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--spacing-6);
    padding-bottom: var(--spacing-4);
    border-bottom: 1px solid var(--glass-border);
}

.chart-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
    margin: 0;
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
}

.chart-title i {
    color: var(--healthcare-primary);
}

.chart-actions {
    display: flex;
    gap: var(--spacing-2);
}

.chart-btn {
    padding: var(--spacing-2) var(--spacing-3);
    background: white;
    border: 1px solid var(--neutral-200);
    border-radius: var(--radius-md);
    font-size: var(--font-size-sm);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.chart-btn:hover {
    background: var(--neutral-50);
    border-color: var(--healthcare-primary);
}

.chart-placeholder {
    background: linear-gradient(135deg, rgba(37, 99, 235, 0.08) 0%, rgba(16, 185, 129, 0.08) 100%);
    border: 2px dashed var(--glass-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-16);
    text-align: center;
    color: var(--text-secondary);
}

.chart-placeholder i {
    font-size: var(--font-size-4xl);
    margin-bottom: var(--spacing-4);
    opacity: 0.5;
}

/* ===== Activity Card ===== */
.activity-card {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    padding: var(--spacing-6);
    box-shadow: var(--glass-shadow-lg);
}

.activity-item {
    display: flex;
    gap: var(--spacing-4);
    padding: var(--spacing-4);
    border-bottom: 1px solid var(--glass-border);
    transition: background var(--transition-fast);
}

.activity-item:last-child {
    border-bottom: none;
}

.activity-item:hover {
    background: rgba(255, 255, 255, 0.5);
    border-radius: var(--radius-md);
}

.activity-icon {
    width: 40px;
    height: 40px;
    border-radius: var(--radius-lg);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.activity-icon.success {
    background: rgba(16, 185, 129, 0.1);
    color: var(--healthcare-success);
}

.activity-icon.info {
    background: rgba(59, 130, 246, 0.1);
    color: var(--healthcare-info);
}

.activity-icon.warning {
    background: rgba(245, 158, 11, 0.1);
    color: var(--healthcare-warning);
}

.activity-content {
    flex: 1;
    min-width: 0;
}

.activity-title {
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
    margin-bottom: var(--spacing-1);
}

.activity-description {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--spacing-1);
}

.activity-time {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
}

/* ===== Grid Layout ===== */
.dashboard-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: var(--spacing-6);
    margin-bottom: var(--spacing-6);
}

@media (max-width: 1024px) {
    .dashboard-grid {
        grid-template-columns: 1fr;
    }
}

/* ===== Quick Actions ===== */
.quick-actions-card {
    background: var(--glass-bg);
    backdrop-filter: var(--glass-blur);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    padding: var(--spacing-6);
    box-shadow: var(--glass-shadow-lg);
}

.quick-actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: var(--spacing-3);
}

.quick-action-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-4);
    background: white;
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    text-decoration: none;
    color: var(--text-primary);
    transition: all var(--transition-fast);
}

.quick-action-item:hover {
    transform: translateY(-4px);
    box-shadow: var(--glass-shadow-md);
    border-color: var(--healthcare-primary);
}

.quick-action-icon {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-lg);
    background: linear-gradient(135deg, var(--healthcare-primary) 0%, var(--healthcare-accent) 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xl);
}

.quick-action-label {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    text-align: center;
}
</style>
{% endblock %}

{% block content %}
<!-- Metrics Grid -->
<div class="metrics-grid">
    <div class="metric-card">
        <div class="metric-header">
            <div class="metric-icon">
                <i class="fas fa-heartbeat"></i>
            </div>
            <div class="metric-trend">
                <i class="fas fa-arrow-up"></i>
                12%
            </div>
        </div>
        <div class="metric-value">98.3%</div>
        <div class="metric-label">System Health Score</div>
        <div class="metric-footer">
            All systems operational • Last updated 5 min ago
        </div>
    </div>
    
    <div class="metric-card">
        <div class="metric-header">
            <div class="metric-icon">
                <i class="fas fa-users"></i>
            </div>
            <div class="metric-trend">
                <i class="fas fa-arrow-up"></i>
                8%
            </div>
        </div>
        <div class="metric-value">2,847</div>
        <div class="metric-label">Total Patients</div>
        <div class="metric-footer">
            +234 this week • 23 new today
        </div>
    </div>
    
    <div class="metric-card">
        <div class="metric-header">
            <div class="metric-icon">
                <i class="fas fa-calendar-check"></i>
            </div>
            <div class="metric-trend">
                <i class="fas fa-arrow-up"></i>
                5%
            </div>
        </div>
        <div class="metric-value">143</div>
        <div class="metric-label">Appointments Today</div>
        <div class="metric-footer">
            12 pending • 89 completed
        </div>
    </div>
    
    <div class="metric-card">
        <div class="metric-header">
            <div class="metric-icon">
                <i class="fas fa-bed"></i>
            </div>
            <div class="metric-trend down">
                <i class="fas fa-arrow-down"></i>
                3%
            </div>
        </div>
        <div class="metric-value">78%</div>
        <div class="metric-label">Bed Occupancy Rate</div>
        <div class="metric-footer">
            234 occupied • 66 available
        </div>
    </div>
</div>

<!-- Dashboard Grid -->
<div class="dashboard-grid">
    <!-- Patient Activity Chart -->
    <div class="chart-card">
        <div class="chart-header">
            <h3 class="chart-title">
                <i class="fas fa-chart-line"></i>
                Patient Activity Trends
            </h3>
            <div class="chart-actions">
                <button class="chart-btn">7 Days</button>
                <button class="chart-btn">30 Days</button>
                <button class="chart-btn">90 Days</button>
            </div>
        </div>
        <div class="chart-placeholder">
            <i class="fas fa-chart-area"></i>
            <p>Interactive patient activity chart will be displayed here</p>
            <small>Showing visits, admissions, and discharge trends over time</small>
        </div>
    </div>
    
    <!-- Recent Activity -->
    <div class="activity-card">
        <div class="chart-header">
            <h3 class="chart-title">
                <i class="fas fa-clock"></i>
                Recent Activity
            </h3>
        </div>
        <div class="activity-item">
            <div class="activity-icon success">
                <i class="fas fa-user-plus"></i>
            </div>
            <div class="activity-content">
                <div class="activity-title">New Patient Registered</div>
                <div class="activity-description">Emily Wilson added to the system</div>
                <div class="activity-time">5 minutes ago</div>
            </div>
        </div>
        <div class="activity-item">
            <div class="activity-icon info">
                <i class="fas fa-calendar-check"></i>
            </div>
            <div class="activity-content">
                <div class="activity-title">Appointment Scheduled</div>
                <div class="activity-description">Dr. Smith - John Doe (Feb 20, 2:00 PM)</div>
                <div class="activity-time">12 minutes ago</div>
            </div>
        </div>
        <div class="activity-item">
            <div class="activity-icon warning">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="activity-content">
                <div class="activity-title">Low Stock Alert</div>
                <div class="activity-description">Ventilators running low - 3 remaining</div>
                <div class="activity-time">2 hours ago</div>
            </div>
        </div>
        <div class="activity-item">
            <div class="activity-icon success">
                <i class="fas fa-notes-medical"></i>
            </div>
            <div class="activity-content">
                <div class="activity-title">Prescription Created</div>
                <div class="activity-description">Dr. Johnson prescribed medication</div>
                <div class="activity-time">3 hours ago</div>
            </div>
        </div>
        <div class="activity-item">
            <div class="activity-icon info">
                <i class="fas fa-video"></i>
            </div>
            <div class="activity-content">
                <div class="activity-title">Telemedicine Session</div>
                <div class="activity-description">Virtual consultation completed</div>
                <div class="activity-time">5 hours ago</div>
            </div>
        </div>
    </div>
</div>

<!-- System Performance Chart -->
<div class="chart-card">
    <div class="chart-header">
        <h3 class="chart-title">
            <i class="fas fa-tachometer-alt"></i>
            System Performance Metrics
        </h3>
        <div class="chart-actions">
            <button class="chart-btn">Response Time</button>
            <button class="chart-btn">CPU Usage</button>
            <button class="chart-btn">Memory</button>
        </div>
    </div>
    <div class="chart-placeholder">
        <i class="fas fa-server"></i>
        <p>Real-time system performance monitoring</p>
        <small>Average response time: 143ms • CPU: 24% • Memory: 3.2GB/8GB</small>
    </div>
</div>

<!-- Quick Actions -->
<div class="quick-actions-card">
    <div class="chart-header">
        <h3 class="chart-title">
            <i class="fas fa-bolt"></i>
            Quick Actions
        </h3>
    </div>
    <div class="quick-actions-grid">
        <a href="{% url 'admin_portal:patients' %}" class="quick-action-item">
            <div class="quick-action-icon">
                <i class="fas fa-user-plus"></i>
            </div>
            <span class="quick-action-label">Add Patient</span>
        </a>
        <a href="/django-admin/appointments/" class="quick-action-item">
            <div class="quick-action-icon">
                <i class="fas fa-calendar-plus"></i>
            </div>
            <span class="quick-action-label">Schedule Appointment</span>
        </a>
        <a href="{% url 'admin_portal:resources' %}" class="quick-action-item">
            <div class="quick-action-icon">
                <i class="fas fa-box"></i>
            </div>
            <span class="quick-action-label">Manage Resources</span>
        </a>
        <a href="/django-admin/prescriptions/" class="quick-action-item">
            <div class="quick-action-icon">
                <i class="fas fa-prescription"></i>
            </div>
            <span class="quick-action-label">New Prescription</span>
        </a>
        <a href="{% url 'admin_portal:analytics' %}" class="quick-action-item">
            <div class="quick-action-icon">
                <i class="fas fa-chart-bar"></i>
            </div>
            <span class="quick-action-label">View Analytics</span>
        </a>
        <a href="/django-admin/" class="quick-action-item">
            <div class="quick-action-icon">
                <i class="fas fa-cog"></i>
            </div>
            <span class="quick-action-label">System Settings</span>
        </a>
    </div>
</div>
{% endblock %}
